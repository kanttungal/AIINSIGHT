# AI Blog Deployment Guide

## Local Development

To run the project locally, follow these steps:

1. Create a virtual environment:
   ```
   python -m venv venv
   ```

2. Activate the virtual environment:
   - On Windows: `venv\Scripts\activate`
   - On macOS/Linux: `source venv/bin/activate`

3. Install dependencies:
   ```
   pip install -r requirements.txt
   ```

4. Run migrations:
   ```
   python manage.py migrate
   ```

5. Start the development server:
   ```
   python manage.py runserver
   ```

## Deployment Options

This project supports multiple deployment platforms:

### Deployment to Render

This project is configured for deployment to Render with a complete production setup. The configuration includes:

- `render.yaml`: Defines the service configuration for Render
- `build.sh`: Build script that runs during deployment
- `ai_blog/settings_production.py`: Production-specific settings with security enhancements

#### Deployment Steps

1. Fork this repository to your GitHub account
2. Sign up or log in to [Render](https://render.com/)
3. Click "New" and select "Web Service"
4. Connect your GitHub account and select your forked repository
5. Configure the service:
   - Name: ai-blog (or any name you prefer)
   - Environment: Python 3
   - Region: Choose the region closest to your users
6. Render will automatically detect and use the `render.yaml` configuration
7. Add environment variables in the Render dashboard:
   - `SECRET_KEY`: A secure secret key for production (Render can auto-generate this)
   - `ALLOWED_HOSTS`: Your Render app URL (e.g., `your-app-name.onrender.com`)
8. Click "Create Web Service"
9. Render will automatically provision a PostgreSQL database as defined in `render.yaml`

#### Environment Variables

The following environment variables are used in production:

- `SECRET_KEY`: Django secret key (auto-generated by Render or set manually)
- `DEBUG`: Set to "False" for production (default)
- `ALLOWED_HOSTS`: Comma-separated list of allowed hosts (Render will set this automatically)
- `DATABASE_URL`: PostgreSQL database URL (automatically set by Render)
- `DJANGO_SETTINGS_MODULE`: Set to `ai_blog.settings_production` (defined in render.yaml)

### Deployment to PythonAnywhere

This project is also configured for deployment to PythonAnywhere. See `PYTHONANYWHERE_DEPLOYMENT.md` for detailed instructions.

#### Quick PythonAnywhere Deployment Steps

1. Upload your code to PythonAnywhere (via Git or direct upload)
2. Create and activate a virtual environment
3. Install dependencies: `pip install -r requirements.txt`
4. Configure the web app in the PythonAnywhere dashboard
5. Set up static files mapping
6. Reload the web app

For detailed instructions, see `PYTHONANYWHERE_DEPLOYMENT.md`.

### Security Features

The production settings include several security enhancements:

- HTTPS enforcement
- Secure cookies
- Security headers (XSS protection, content type sniffing protection)
- HSTS (HTTP Strict Transport Security)
- Frame protection

### Automatic Features

The build script automatically:

- Upgrades pip
- Installs all dependencies
- Collects static files
- Runs database migrations
- Creates a default superuser (admin/admin) if one doesn't exist

## Project Structure

- `ai_blog/settings.py`: Development settings
- `ai_blog/settings_production.py`: Production settings with security enhancements for Render
- `ai_blog/settings_pythonanywhere.py`: Production settings with security enhancements for PythonAnywhere
- `requirements.txt`: Project dependencies
- `build.sh`: Build script for Render deployment with automatic setup
- `deploy_pythonanywhere.sh`: Deployment script for PythonAnywhere
- `pythonanywhere_wsgi.py`: WSGI configuration for PythonAnywhere
- `render.yaml`: Render service configuration with database provisioning
- `PYTHONANYWHERE_DEPLOYMENT.md`: Detailed PythonAnywhere deployment guide

## Troubleshooting

If you encounter issues during deployment:

1. Check the build logs in your deployment platform's dashboard
2. Verify all environment variables are set correctly
3. Ensure your repository is up to date with the latest changes
4. Check that the database migrations run successfully

For local development issues:

1. Ensure you're using a virtual environment
2. Check that all dependencies are installed
3. Verify the database is accessible and migrated
